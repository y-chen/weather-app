<mat-card *ngIf="cultures && form">
	<mat-card-header>
		<mat-card-title translate>{{ getLocalizationPath('title') }}</mat-card-title>
		<mat-card-subtitle translate>{{ getLocalizationPath('subtitle') }}</mat-card-subtitle>
	</mat-card-header>

	<mat-card-content class="form" [formGroup]="form">
		<div class="form-column">
			<mat-form-field>
				<mat-label translate>{{ getLocalizationPath('form.language') }}</mat-label>

				<mat-select appearance="fill" formControlName="culture" required>
					<mat-option *ngFor="let culture of cultures" [value]="culture">
						<ng-container *ngTemplateOutlet="cultureTemplate; context: { culture: culture }">
						</ng-container>
					</mat-option>

					<mat-select-trigger>
						<ng-container *ngIf="form.get('culture').value">
							<ng-container
								*ngTemplateOutlet="cultureTemplate; context: { culture: form.get('culture').value }"
							>
							</ng-container>
						</ng-container>
					</mat-select-trigger>
				</mat-select>

				<mat-error>
					<wa-validation-errors [control]="form.get('culture')" [errors]="validationErrors.culture">
					</wa-validation-errors>
				</mat-error>
			</mat-form-field>

			<mat-checkbox formControlName="allowLocalization" (change)="onAllowLocalizationChange()">
				<span translate>{{ getLocalizationPath('form.allowLocalization') }}</span>
			</mat-checkbox>
		</div>
	</mat-card-content>

	<mat-card-actions>
		<button mat-raised-button color="accent" (click)="onConfirmClick()" [disabled]="form.invalid">
			<span translate>{{ getLocalizationPath('form.confirm') }}</span>
		</button>
	</mat-card-actions>
</mat-card>

<ng-template #cultureTemplate let-culture="culture">
	<i class="flag-icon flag-icon-{{ culture.language }}"></i>

	<span>{{ culture.label }}</span>
</ng-template>
